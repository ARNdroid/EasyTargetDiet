import br.com.arndroid.buildutlis.ShrBuildProfile

apply plugin: 'com.android.library'

android {

    ShrBuildProfile buildProfile = new ShrBuildProfile('etd-shr')

    android.libraryVariants.all { variant ->
        variant.outputs.each { output ->
            def outputFile = output.outputFile
            if (outputFile != null && outputFile.name.endsWith('.aar')) {
                //noinspection GroovyAssignabilityCheck
                def newApkFileName = "$project.buildDir/outputs/aar/" + buildProfile.getOutputFileNameForVariant(variant.baseName)
                output.outputFile = new File(newApkFileName)
            }
        }
    }

    compileSdkVersion buildProfile.getCompileSdkVersion()
    buildToolsVersion buildProfile.getBuildToolsVersion()

    defaultConfig {
        minSdkVersion buildProfile.getMinSdkVersion()
        targetSdkVersion buildProfile.getTargetSdkVersion()
        versionName buildProfile.getVersionName()
        versionCode buildProfile.getVersionCode()
    }

    buildTypes {
        release {
            minifyEnabled false
        }
    }
}

dependencies {
    compile fileTree(dir: 'libs', include: ['*.jar'])
    compile 'com.android.support:appcompat-v7:21.0.3'
}
